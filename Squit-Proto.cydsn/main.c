/* ==========================================
 *											*
 * GoBee Director			                *
 * For versioning see _Hystory.txt			*
 * Including:								*
 *											*
 * Copyright 2017 Gobee Srl				    *
 * Author: Graziano G. Ravizza				*
 * All Rights Reserved						*
 * UNPUBLISHED, LICENSED SOFTWARE.			*
 *											*
 * CONFIDENTIAL AND PROPRIETARY INFORMATION	*
 * WHICH IS THE PROPERTY OF Logic brainstorm*
 *											*
 * ==========================================
*/

/* PSOC Include Files */
#include <device.h>
#include <math.h>
#include <stdio.h>

/* This PRJ Include Files */
#include <gobee.h>
#include <gobeelib.h>
#include <console.h>
#include <systrings.h>
#include <estimators.h>
#include <ITG-3701.h>
#include <mover.h>
#include <motor_CTRL.h>
#include <clu.h>
#include <gml.h>
#include <statistics.h>
#include <torquestat.h>

/* Conditional Compilation */
//none


/******************************************/
/*** MACHINE STATE DEF & INITIALIZATION ***/
/******************************************/
uint8 machine_state = GOBEE_POWERON;		/* Initial Machine State = POWERON 					*/
											/* Machine States = [POWERON | OPERATIVE | FAULT]	*/

uint8 machine_state_backup;					/* machine state backup var for test mode			*/


/*******************/
/*** GLOBAL WARS ***/
/*******************/
uint8  ledmask = 0x00;				/* Led Mask Global Memory = ALL LEDS ON		*/

/* ADC Sampled Values */
int16 AdcValue[ADC_MUX_LENGHT];

/* GLOBAL Analog ADXL325 3D accelerometer struct */
struct ANALOG_3D_ACCELEROMETER aacc;

signed long system_dynamic_scalar;	/* x_acc_ADC^2 + y_acc_ADC^2 - (1g_ADC)^2	*/

/* global IMU UM7 vars */
#if IMU_UM7_ENABLED
EULER_ANGLES euler_angles ; 		/* Struttura in cui vengono messi gli angoli di Eulero misurati dalla IMU UM7 */
#endif

struct IMU_SENSOR	IMU_sensor;		/* Struttura dei dati della IMU */


/* external ITG-3701 digital gyro vars */
extern float gRes;      				// scale resolutions per LSB for the sensors
extern int16 gyroCount[3];  			// Stores the 16-bit signed gyro output
extern float gx, gy, gz; 				// variables to hold latest sensor data values 
extern float gyroBias[3];			 	// Bias corrections for gyro, accelerometer, and magnetometer
extern float temperature;          		// Stores the ITG3701yro internal chip temperature in degrees Celsius


/* Control Variables */
float fsampling = (float)SAMPLING_FREQ/1000;	/* fsampling [kHz]				*/

float anapos=0;						/* Analog Position Output(t) 				*/
int32 anapos_offset=0;				/* Analog Position Output Offset			*/

/* GLOBAL CONTROL CHECK VARS */
uint16 isr_START_check_counter=0;	/* Check counters must be the same			*/
uint16 isr_STOP_check_counter=0;	/* otherwise Ctrl isr have BIG problems		*/

/* Global Absolute Position Sensor */
struct ABSPOS_SENSOR	pan_absolute_sensor;	/* PAN  Absolute Position Sensor Parameters & RT Datas */
struct ABSPOS_SENSOR	tilt_absolute_sensor;	/* TILT Absolute Position Sensor Parameters & RT Datas */
//struct ABSPOS_SENSOR	roll_absolute_sensor;	/* ROLL Absolute Position Sensor Parameters & RT Datas */	//ROLL FUTURE EXPANSION

/* Global axis absolute sensor STATISTICS	*/
struct STATISTICS pan_absolute_sensor_stat;		/* PAN  Absolute Position Sensor Statistics Datas  	   */
struct STATISTICS tilt_absolute_sensor_stat;	/* TILT Absolute Position Sensor Statistics Datas	   */
//struct STATISTICS roll_absolute_sensor_stat;	/* ROLL Absolute Position Sensor Statistics Datas	   */	//ROLL FUTURE EXPANSION

/* Global axis current and power STATISTICS	*/
struct STATISTICS pan_current_stat;				/* PAN  Current  Statistic    [A]           (Motor Torque estimating) */
struct STATISTICS pan_qpower_stat;				/* PAN  quasi-power Statistic [A * rad/sec] (Motor Power estimating)  */
struct STATISTICS tilt_current_stat;			/* TILT Current  Statistic    [A]           (Motor Torque estimating) */
struct STATISTICS tilt_qpower_stat;				/* TILT quasi-power Statistic [A * rad/sec] (Motor Power estimating)  */

/* Global axis TORQUE Estimator				*/
struct TORQUESTAT pan_torque_stat;				/* PAN  Torque Statistics Real Time Datas  	   */
struct TORQUESTAT tilt_torque_stat;				/* TILT Torque Statistics Real Time Datas	   */
//struct TORQUESTAT roll_torque_stat;			/* ROLL Torque Statistics Real Time Datas	   */	//ROLL FUTURE EXPANSION

/* GLOBAL MOTOR AXIS STRUCTURES */
struct MOTOR_AXIS pan_axis;						/* PAN  Motor Axis Parameters & RT Datas	*/
struct MOTOR_AXIS tilt_axis;					/* TILT Motor Axis Parameters & RT Datas	*/
//struct MOTOR_AXIS roll_axis;					/* ROLL Motor Axis Parameters & RT Datas	*/		//ROLL FUTURE EXPANSION
struct MOTOR_AXIS *Selected_ANAOUT=&tilt_axis;	/* Selected Axis for Analog Output			*/

/* GLOBAL MOVER PATH Array */
path_type path[PATH_N_MAX];		/* path array structure instantiation 		*/

/* GLOBAL MOVERs 		   */
mover_type mover_pan;			/* mover PAN structure instantiation		*/
mover_type mover_tilt;			/* mover TILT structure instantiation		*/

/* GLOBAL Q elements (shots) ARRAY	*/
struct QELEMENT q[MAX_Q_MEMORIES_SAFE];

/* Q number --> Q memory index table for fast indexing 			*/
/* (q_table[x] == Q_MEMORY_NOT_ALLOCATED) --> Qx not allocated	*/
uint8 q_table[MAX_Q_NUMBER_SAFE];
uint8 qmemory_standard_address[MAX_Q_NUMBER_SAFE]; 

/* GLOBAL CLU Array 	*/
clu_type clu[MAX_CLU_NUMBER];

/* GLOBAL CLU execution state machine */
struct CLU_STATEMACHINE clu_sm;

/* GLOBAL CLU sequence array */
uint8 clu_sequence[MAX_CLU_SEQUENCE_STEPS];		//0xFF = END SEQUENCE

/* GLOBAL events structure	*/
struct EVENTS events;

/* GoBee Faults structure */
struct GOBEE_FAULTS gobeeFaults;	

/* GLOBAL GoBee PARAMETERS (EEPROM) */
struct GOBEE_PARAMS gobee_param;	


/* EEPROM Data Buffers */
uint8 EEreadBuffer[18];		/* USED 16 elements; 2 elements+ for SAFE GUARD */
uint8 EEwriteBuffer[18];    /* USED 16 elements; 2 elements+ for SAFE GUARD */

/* ASTIM WAVES (3Hz - 3333 samples/sec */
const uint8 WaveDAC8_wave_sine[WaveDAC8_WAVE_SINE_LENGTH] = { 128u,128u,128u,128u,128u,129u,129u,129u,129u,130u,130u,130u,130u,131u,131u,131u,131u,132u,132u,132u,132u,132u,133u,133u,133u,133u,134u,134u,134u,134u,135u,135u,135u,135u,136u,136u,136u,136u,136u,137u,137u,137u,137u,138u,138u,138u,138u,139u,139u,139u,139u,139u,140u,140u,140u,140u,141u,141u,141u,141u,142u,142u,142u,142u,143u,143u,143u,143u,143u,144u,144u,144u,144u,145u,145u,145u,145u,146u,146u,146u,146u,147u,147u,147u,147u,147u,148u,148u,148u,148u,149u,149u,149u,149u,150u,150u,150u,150u,150u,151u,151u,151u,151u,152u,152u,152u,152u,153u,153u,153u,153u,153u,154u,154u,154u,154u,155u,155u,155u,155u,156u,156u,156u,156u,156u,157u,157u,157u,157u,158u,158u,158u,158u,159u,159u,159u,159u,159u,160u,160u,160u,160u,161u,161u,161u,161u,161u,162u,162u,162u,162u,163u,163u,163u,163u,164u,164u,164u,164u,164u,165u,165u,165u,165u,166u,166u,166u,166u,166u,167u,167u,167u,167u,168u,168u,168u,168u,168u,169u,169u,169u,169u,170u,170u,170u,170u,170u,171u,171u,171u,171u,172u,172u,172u,172u,172u,173u,173u,173u,173u,174u,174u,174u,174u,174u,175u,175u,175u,175u,175u,176u,176u,176u,176u,177u,177u,177u,177u,177u,178u,178u,178u,178u,179u,179u,179u,179u,179u,180u,180u,180u,180u,180u,181u,181u,181u,181u,182u,182u,182u,182u,182u,183u,183u,183u,183u,183u,184u,184u,184u,184u,184u,185u,185u,185u,185u,186u,186u,186u,186u,186u,187u,187u,187u,187u,187u,188u,188u,188u,188u,188u,189u,189u,189u,189u,189u,190u,190u,190u,190u,190u,191u,191u,191u,191u,191u,192u,192u,192u,192u,192u,193u,193u,193u,193u,193u,194u,194u,194u,194u,194u,195u,195u,195u,195u,195u,196u,196u,196u,196u,196u,197u,197u,197u,197u,197u,198u,198u,198u,198u,198u,199u,199u,199u,199u,199u,200u,200u,200u,200u,200u,201u,201u,201u,201u,201u,201u,202u,202u,202u,202u,202u,203u,203u,203u,203u,203u,204u,204u,204u,204u,204u,204u,205u,205u,205u,205u,205u,206u,206u,206u,206u,206u,207u,207u,207u,207u,207u,207u,208u,208u,208u,208u,208u,209u,209u,209u,209u,209u,209u,210u,210u,210u,210u,210u,210u,211u,211u,211u,211u,211u,212u,212u,212u,212u,212u,212u,213u,213u,213u,213u,213u,213u,214u,214u,214u,214u,214u,214u,215u,215u,215u,215u,215u,215u,216u,216u,216u,216u,216u,216u,217u,217u,217u,217u,217u,217u,218u,218u,218u,218u,218u,218u,219u,219u,219u,219u,219u,219u,220u,220u,220u,220u,220u,220u,220u,221u,221u,221u,221u,221u,221u,222u,222u,222u,222u,222u,222u,223u,223u,223u,223u,223u,223u,223u,224u,224u,224u,224u,224u,224u,224u,225u,225u,225u,225u,225u,225u,226u,226u,226u,226u,226u,226u,226u,227u,227u,227u,227u,227u,227u,227u,228u,228u,228u,228u,228u,228u,228u,228u,229u,229u,229u,229u,229u,229u,229u,230u,230u,230u,230u,230u,230u,230u,231u,231u,231u,231u,231u,231u,231u,231u,232u,232u,232u,232u,232u,232u,232u,232u,233u,233u,233u,233u,233u,233u,233u,234u,234u,234u,234u,234u,234u,234u,234u,234u,235u,235u,235u,235u,235u,235u,235u,235u,236u,236u,236u,236u,236u,236u,236u,236u,237u,237u,237u,237u,237u,237u,237u,237u,237u,238u,238u,238u,238u,238u,238u,238u,238u,238u,239u,239u,239u,239u,239u,239u,239u,239u,239u,239u,240u,240u,240u,240u,240u,240u,240u,240u,240u,241u,241u,241u,241u,241u,241u,241u,241u,241u,241u,241u,242u,242u,242u,242u,242u,242u,242u,242u,242u,242u,243u,243u,243u,243u,243u,243u,243u,243u,243u,243u,243u,244u,244u,244u,244u,244u,244u,244u,244u,244u,244u,244u,244u,245u,245u,245u,245u,245u,245u,245u,245u,245u,245u,245u,245u,246u,246u,246u,246u,246u,246u,246u,246u,246u,246u,246u,246u,246u,246u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,251u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,250u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,249u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,248u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,247u,246u,246u,246u,246u,246u,246u,246u,246u,246u,246u,246u,246u,246u,245u,245u,245u,245u,245u,245u,245u,245u,245u,245u,245u,245u,245u,244u,244u,244u,244u,244u,244u,244u,244u,244u,244u,244u,243u,243u,243u,243u,243u,243u,243u,243u,243u,243u,243u,242u,242u,242u,242u,242u,242u,242u,242u,242u,242u,242u,241u,241u,241u,241u,241u,241u,241u,241u,241u,241u,240u,240u,240u,240u,240u,240u,240u,240u,240u,240u,239u,239u,239u,239u,239u,239u,239u,239u,239u,238u,238u,238u,238u,238u,238u,238u,238u,238u,237u,237u,237u,237u,237u,237u,237u,237u,237u,236u,236u,236u,236u,236u,236u,236u,236u,236u,235u,235u,235u,235u,235u,235u,235u,235u,234u,234u,234u,234u,234u,234u,234u,234u,233u,233u,233u,233u,233u,233u,233u,233u,232u,232u,232u,232u,232u,232u,232u,232u,231u,231u,231u,231u,231u,231u,231u,230u,230u,230u,230u,230u,230u,230u,230u,229u,229u,229u,229u,229u,229u,229u,228u,228u,228u,228u,228u,228u,228u,227u,227u,227u,227u,227u,227u,227u,226u,226u,226u,226u,226u,226u,226u,225u,225u,225u,225u,225u,225u,225u,224u,224u,224u,224u,224u,224u,223u,223u,223u,223u,223u,223u,223u,222u,222u,222u,222u,222u,222u,222u,221u,221u,221u,221u,221u,221u,220u,220u,220u,220u,220u,220u,219u,219u,219u,219u,219u,219u,218u,218u,218u,218u,218u,218u,218u,217u,217u,217u,217u,217u,217u,216u,216u,216u,216u,216u,216u,215u,215u,215u,215u,215u,215u,214u,214u,214u,214u,214u,214u,213u,213u,213u,213u,213u,212u,212u,212u,212u,212u,212u,211u,211u,211u,211u,211u,211u,210u,210u,210u,210u,210u,209u,209u,209u,209u,209u,209u,208u,208u,208u,208u,208u,208u,207u,207u,207u,207u,207u,206u,206u,206u,206u,206u,206u,205u,205u,205u,205u,205u,204u,204u,204u,204u,204u,203u,203u,203u,203u,203u,203u,202u,202u,202u,202u,202u,201u,201u,201u,201u,201u,200u,200u,200u,200u,200u,199u,199u,199u,199u,199u,199u,198u,198u,198u,198u,198u,197u,197u,197u,197u,197u,196u,196u,196u,196u,196u,195u,195u,195u,195u,195u,194u,194u,194u,194u,194u,193u,193u,193u,193u,193u,192u,192u,192u,192u,192u,191u,191u,191u,191u,191u,190u,190u,190u,190u,190u,189u,189u,189u,189u,189u,188u,188u,188u,188u,187u,187u,187u,187u,187u,186u,186u,186u,186u,186u,185u,185u,185u,185u,185u,184u,184u,184u,184u,184u,183u,183u,183u,183u,182u,182u,182u,182u,182u,181u,181u,181u,181u,181u,180u,180u,180u,180u,179u,179u,179u,179u,179u,178u,178u,178u,178u,178u,177u,177u,177u,177u,176u,176u,176u,176u,176u,175u,175u,175u,175u,175u,174u,174u,174u,174u,173u,173u,173u,173u,173u,172u,172u,172u,172u,171u,171u,171u,171u,171u,170u,170u,170u,170u,169u,169u,169u,169u,169u,168u,168u,168u,168u,167u,167u,167u,167u,167u,166u,166u,166u,166u,165u,165u,165u,165u,165u,164u,164u,164u,164u,163u,163u,163u,163u,162u,162u,162u,162u,162u,161u,161u,161u,161u,160u,160u,160u,160u,160u,159u,159u,159u,159u,158u,158u,158u,158u,157u,157u,157u,157u,157u,156u,156u,156u,156u,155u,155u,155u,155u,155u,154u,154u,154u,154u,153u,153u,153u,153u,152u,152u,152u,152u,152u,151u,151u,151u,151u,150u,150u,150u,150u,149u,149u,149u,149u,148u,148u,148u,148u,148u,147u,147u,147u,147u,146u,146u,146u,146u,145u,145u,145u,145u,145u,144u,144u,144u,144u,143u,143u,143u,143u,142u,142u,142u,142u,141u,141u,141u,141u,141u,140u,140u,140u,140u,139u,139u,139u,139u,138u,138u,138u,138u,138u,137u,137u,137u,137u,136u,136u,136u,136u,135u,135u,135u,135u,134u,134u,134u,134u,134u,133u,133u,133u,133u,132u,132u,132u,132u,131u,131u,131u,131u,130u,130u,130u,130u,130u,129u,129u,129u,129u,128u,128u,128u,128u,127u,127u,127u,127u,126u,126u,126u,126u,125u,125u,125u,125u,125u,124u,124u,124u,124u,123u,123u,123u,123u,122u,122u,122u,122u,121u,121u,121u,121u,121u,120u,120u,120u,120u,119u,119u,119u,119u,118u,118u,118u,118u,117u,117u,117u,117u,117u,116u,116u,116u,116u,115u,115u,115u,115u,114u,114u,114u,114u,114u,113u,113u,113u,113u,112u,112u,112u,112u,111u,111u,111u,111u,110u,110u,110u,110u,110u,109u,109u,109u,109u,108u,108u,108u,108u,107u,107u,107u,107u,107u,106u,106u,106u,106u,105u,105u,105u,105u,104u,104u,104u,104u,103u,103u,103u,103u,103u,102u,102u,102u,102u,101u,101u,101u,101u,100u,100u,100u,100u,100u,99u,99u,99u,99u,98u,98u,98u,98u,98u,97u,97u,97u,97u,96u,96u,96u,96u,95u,95u,95u,95u,95u,94u,94u,94u,94u,93u,93u,93u,93u,93u,92u,92u,92u,92u,91u,91u,91u,91u,90u,90u,90u,90u,90u,89u,89u,89u,89u,88u,88u,88u,88u,88u,87u,87u,87u,87u,86u,86u,86u,86u,86u,85u,85u,85u,85u,84u,84u,84u,84u,84u,83u,83u,83u,83u,82u,82u,82u,82u,82u,81u,81u,81u,81u,80u,80u,80u,80u,80u,79u,79u,79u,79u,79u,78u,78u,78u,78u,77u,77u,77u,77u,77u,76u,76u,76u,76u,76u,75u,75u,75u,75u,74u,74u,74u,74u,74u,73u,73u,73u,73u,73u,72u,72u,72u,72u,71u,71u,71u,71u,71u,70u,70u,70u,70u,70u,69u,69u,69u,69u,69u,68u,68u,68u,68u,68u,67u,67u,67u,67u,66u,66u,66u,66u,66u,65u,65u,65u,65u,65u,64u,64u,64u,64u,64u,63u,63u,63u,63u,63u,62u,62u,62u,62u,62u,61u,61u,61u,61u,61u,60u,60u,60u,60u,60u,59u,59u,59u,59u,59u,58u,58u,58u,58u,58u,57u,57u,57u,57u,57u,56u,56u,56u,56u,56u,56u,55u,55u,55u,55u,55u,54u,54u,54u,54u,54u,53u,53u,53u,53u,53u,52u,52u,52u,52u,52u,52u,51u,51u,51u,51u,51u,50u,50u,50u,50u,50u,49u,49u,49u,49u,49u,49u,48u,48u,48u,48u,48u,47u,47u,47u,47u,47u,47u,46u,46u,46u,46u,46u,46u,45u,45u,45u,45u,45u,44u,44u,44u,44u,44u,44u,43u,43u,43u,43u,43u,43u,42u,42u,42u,42u,42u,41u,41u,41u,41u,41u,41u,40u,40u,40u,40u,40u,40u,39u,39u,39u,39u,39u,39u,38u,38u,38u,38u,38u,38u,37u,37u,37u,37u,37u,37u,37u,36u,36u,36u,36u,36u,36u,35u,35u,35u,35u,35u,35u,34u,34u,34u,34u,34u,34u,33u,33u,33u,33u,33u,33u,33u,32u,32u,32u,32u,32u,32u,32u,31u,31u,31u,31u,31u,31u,30u,30u,30u,30u,30u,30u,30u,29u,29u,29u,29u,29u,29u,29u,28u,28u,28u,28u,28u,28u,28u,27u,27u,27u,27u,27u,27u,27u,26u,26u,26u,26u,26u,26u,26u,25u,25u,25u,25u,25u,25u,25u,25u,24u,24u,24u,24u,24u,24u,24u,23u,23u,23u,23u,23u,23u,23u,23u,22u,22u,22u,22u,22u,22u,22u,22u,21u,21u,21u,21u,21u,21u,21u,21u,20u,20u,20u,20u,20u,20u,20u,20u,19u,19u,19u,19u,19u,19u,19u,19u,19u,18u,18u,18u,18u,18u,18u,18u,18u,18u,17u,17u,17u,17u,17u,17u,17u,17u,17u,16u,16u,16u,16u,16u,16u,16u,16u,16u,15u,15u,15u,15u,15u,15u,15u,15u,15u,15u,14u,14u,14u,14u,14u,14u,14u,14u,14u,14u,13u,13u,13u,13u,13u,13u,13u,13u,13u,13u,13u,12u,12u,12u,12u,12u,12u,12u,12u,12u,12u,12u,11u,11u,11u,11u,11u,11u,11u,11u,11u,11u,11u,10u,10u,10u,10u,10u,10u,10u,10u,10u,10u,10u,10u,10u,9u,9u,9u,9u,9u,9u,9u,9u,9u,9u,9u,9u,9u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,4u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,5u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,6u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,7u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,8u,9u,9u,9u,9u,9u,9u,9u,9u,9u,9u,9u,9u,9u,9u,10u,10u,10u,10u,10u,10u,10u,10u,10u,10u,10u,10u,11u,11u,11u,11u,11u,11u,11u,11u,11u,11u,11u,11u,12u,12u,12u,12u,12u,12u,12u,12u,12u,12u,12u,13u,13u,13u,13u,13u,13u,13u,13u,13u,13u,14u,14u,14u,14u,14u,14u,14u,14u,14u,14u,14u,15u,15u,15u,15u,15u,15u,15u,15u,15u,16u,16u,16u,16u,16u,16u,16u,16u,16u,16u,17u,17u,17u,17u,17u,17u,17u,17u,17u,18u,18u,18u,18u,18u,18u,18u,18u,18u,19u,19u,19u,19u,19u,19u,19u,19u,20u,20u,20u,20u,20u,20u,20u,20u,21u,21u,21u,21u,21u,21u,21u,21u,21u,22u,22u,22u,22u,22u,22u,22u,23u,23u,23u,23u,23u,23u,23u,23u,24u,24u,24u,24u,24u,24u,24u,24u,25u,25u,25u,25u,25u,25u,25u,26u,26u,26u,26u,26u,26u,26u,27u,27u,27u,27u,27u,27u,27u,27u,28u,28u,28u,28u,28u,28u,28u,29u,29u,29u,29u,29u,29u,29u,30u,30u,30u,30u,30u,30u,31u,31u,31u,31u,31u,31u,31u,32u,32u,32u,32u,32u,32u,32u,33u,33u,33u,33u,33u,33u,34u,34u,34u,34u,34u,34u,35u,35u,35u,35u,35u,35u,35u,36u,36u,36u,36u,36u,36u,37u,37u,37u,37u,37u,37u,38u,38u,38u,38u,38u,38u,39u,39u,39u,39u,39u,39u,40u,40u,40u,40u,40u,40u,41u,41u,41u,41u,41u,41u,42u,42u,42u,42u,42u,42u,43u,43u,43u,43u,43u,43u,44u,44u,44u,44u,44u,45u,45u,45u,45u,45u,45u,46u,46u,46u,46u,46u,46u,47u,47u,47u,47u,47u,48u,48u,48u,48u,48u,48u,49u,49u,49u,49u,49u,50u,50u,50u,50u,50u,51u,51u,51u,51u,51u,51u,52u,52u,52u,52u,52u,53u,53u,53u,53u,53u,54u,54u,54u,54u,54u,54u,55u,55u,55u,55u,55u,56u,56u,56u,56u,56u,57u,57u,57u,57u,57u,58u,58u,58u,58u,58u,59u,59u,59u,59u,59u,60u,60u,60u,60u,60u,61u,61u,61u,61u,61u,62u,62u,62u,62u,62u,63u,63u,63u,63u,63u,64u,64u,64u,64u,64u,65u,65u,65u,65u,65u,66u,66u,66u,66u,66u,67u,67u,67u,67u,67u,68u,68u,68u,68u,68u,69u,69u,69u,69u,69u,70u,70u,70u,70u,71u,71u,71u,71u,71u,72u,72u,72u,72u,72u,73u,73u,73u,73u,73u,74u,74u,74u,74u,75u,75u,75u,75u,75u,76u,76u,76u,76u,76u,77u,77u,77u,77u,78u,78u,78u,78u,78u,79u,79u,79u,79u,80u,80u,80u,80u,80u,81u,81u,81u,81u,81u,82u,82u,82u,82u,83u,83u,83u,83u,83u,84u,84u,84u,84u,85u,85u,85u,85u,85u,86u,86u,86u,86u,87u,87u,87u,87u,87u,88u,88u,88u,88u,89u,89u,89u,89u,89u,90u,90u,90u,90u,91u,91u,91u,91u,91u,92u,92u,92u,92u,93u,93u,93u,93u,94u,94u,94u,94u,94u,95u,95u,95u,95u,96u,96u,96u,96u,96u,97u,97u,97u,97u,98u,98u,98u,98u,99u,99u,99u,99u,99u,100u,100u,100u,100u,101u,101u,101u,101u,102u,102u,102u,102u,102u,103u,103u,103u,103u,104u,104u,104u,104u,105u,105u,105u,105u,105u,106u,106u,106u,106u,107u,107u,107u,107u,108u,108u,108u,108u,108u,109u,109u,109u,109u,110u,110u,110u,110u,111u,111u,111u,111u,112u,112u,112u,112u,112u,113u,113u,113u,113u,114u,114u,114u,114u,115u,115u,115u,115u,116u,116u,116u,116u,116u,117u,117u,117u,117u,118u,118u,118u,118u,119u,119u,119u,119u,119u,120u,120u,120u,120u,121u,121u,121u,121u,122u,122u,122u,122u,123u,123u,123u,123u,123u,124u,124u,124u,124u,125u,125u,125u,125u,126u,126u,126u,126u,127u,127u,127u,127u };
const uint8 WaveDAC8_wave_triangle[WaveDAC8_WAVE_TRIANGLE_LENGTH] = { 128u,128u,128u,128u,128u,128u,128u,129u,129u,129u,129u,129u,129u,129u,130u,130u,130u,130u,130u,130u,131u,131u,131u,131u,131u,131u,131u,132u,132u,132u,132u,132u,132u,132u,133u,133u,133u,133u,133u,133u,134u,134u,134u,134u,134u,134u,134u,135u,135u,135u,135u,135u,135u,135u,136u,136u,136u,136u,136u,136u,137u,137u,137u,137u,137u,137u,137u,138u,138u,138u,138u,138u,138u,138u,139u,139u,139u,139u,139u,139u,140u,140u,140u,140u,140u,140u,140u,141u,141u,141u,141u,141u,141u,141u,142u,142u,142u,142u,142u,142u,143u,143u,143u,143u,143u,143u,143u,144u,144u,144u,144u,144u,144u,144u,145u,145u,145u,145u,145u,145u,146u,146u,146u,146u,146u,146u,146u,147u,147u,147u,147u,147u,147u,147u,148u,148u,148u,148u,148u,148u,149u,149u,149u,149u,149u,149u,149u,150u,150u,150u,150u,150u,150u,150u,151u,151u,151u,151u,151u,151u,152u,152u,152u,152u,152u,152u,152u,153u,153u,153u,153u,153u,153u,153u,154u,154u,154u,154u,154u,154u,155u,155u,155u,155u,155u,155u,155u,156u,156u,156u,156u,156u,156u,156u,157u,157u,157u,157u,157u,157u,158u,158u,158u,158u,158u,158u,158u,159u,159u,159u,159u,159u,159u,159u,160u,160u,160u,160u,160u,160u,161u,161u,161u,161u,161u,161u,161u,162u,162u,162u,162u,162u,162u,162u,163u,163u,163u,163u,163u,163u,164u,164u,164u,164u,164u,164u,164u,165u,165u,165u,165u,165u,165u,165u,166u,166u,166u,166u,166u,166u,167u,167u,167u,167u,167u,167u,167u,168u,168u,168u,168u,168u,168u,168u,169u,169u,169u,169u,169u,169u,170u,170u,170u,170u,170u,170u,170u,171u,171u,171u,171u,171u,171u,171u,172u,172u,172u,172u,172u,172u,173u,173u,173u,173u,173u,173u,173u,174u,174u,174u,174u,174u,174u,174u,175u,175u,175u,175u,175u,175u,176u,176u,176u,176u,176u,176u,176u,177u,177u,177u,177u,177u,177u,177u,178u,178u,178u,178u,178u,178u,179u,179u,179u,179u,179u,179u,179u,180u,180u,180u,180u,180u,180u,180u,181u,181u,181u,181u,181u,181u,182u,182u,182u,182u,182u,182u,182u,183u,183u,183u,183u,183u,183u,183u,184u,184u,184u,184u,184u,184u,185u,185u,185u,185u,185u,185u,185u,186u,186u,186u,186u,186u,186u,186u,187u,187u,187u,187u,187u,187u,188u,188u,188u,188u,188u,188u,188u,189u,189u,189u,189u,189u,189u,189u,190u,190u,190u,190u,190u,190u,191u,191u,191u,191u,191u,191u,191u,192u,192u,192u,192u,192u,192u,192u,193u,193u,193u,193u,193u,193u,194u,194u,194u,194u,194u,194u,194u,195u,195u,195u,195u,195u,195u,195u,196u,196u,196u,196u,196u,196u,197u,197u,197u,197u,197u,197u,197u,198u,198u,198u,198u,198u,198u,198u,199u,199u,199u,199u,199u,199u,200u,200u,200u,200u,200u,200u,200u,201u,201u,201u,201u,201u,201u,201u,202u,202u,202u,202u,202u,202u,203u,203u,203u,203u,203u,203u,203u,204u,204u,204u,204u,204u,204u,204u,205u,205u,205u,205u,205u,205u,206u,206u,206u,206u,206u,206u,206u,207u,207u,207u,207u,207u,207u,207u,208u,208u,208u,208u,208u,208u,209u,209u,209u,209u,209u,209u,209u,210u,210u,210u,210u,210u,210u,210u,211u,211u,211u,211u,211u,211u,212u,212u,212u,212u,212u,212u,212u,213u,213u,213u,213u,213u,213u,213u,214u,214u,214u,214u,214u,214u,215u,215u,215u,215u,215u,215u,215u,216u,216u,216u,216u,216u,216u,216u,217u,217u,217u,217u,217u,217u,218u,218u,218u,218u,218u,218u,218u,219u,219u,219u,219u,219u,219u,219u,220u,220u,220u,220u,220u,220u,221u,221u,221u,221u,221u,221u,221u,222u,222u,222u,222u,222u,222u,222u,223u,223u,223u,223u,223u,223u,224u,224u,224u,224u,224u,224u,224u,225u,225u,225u,225u,225u,225u,225u,226u,226u,226u,226u,226u,226u,227u,227u,227u,227u,227u,227u,227u,228u,228u,228u,228u,228u,228u,228u,229u,229u,229u,229u,229u,229u,230u,230u,230u,230u,230u,230u,230u,231u,231u,231u,231u,231u,231u,231u,232u,232u,232u,232u,232u,232u,233u,233u,233u,233u,233u,233u,233u,234u,234u,234u,234u,234u,234u,234u,235u,235u,235u,235u,235u,235u,236u,236u,236u,236u,236u,236u,236u,237u,237u,237u,237u,237u,237u,237u,238u,238u,238u,238u,238u,238u,239u,239u,239u,239u,239u,239u,239u,240u,240u,240u,240u,240u,240u,240u,241u,241u,241u,241u,241u,241u,242u,242u,242u,242u,242u,242u,242u,243u,243u,243u,243u,243u,243u,243u,244u,244u,244u,244u,244u,244u,245u,245u,245u,245u,245u,245u,245u,246u,246u,246u,246u,246u,246u,246u,247u,247u,247u,247u,247u,247u,248u,248u,248u,248u,248u,248u,248u,249u,249u,249u,249u,249u,249u,249u,250u,250u,250u,250u,250u,250u,251u,251u,251u,251u,251u,251u,251u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,251u,251u,251u,251u,251u,251u,251u,250u,250u,250u,250u,250u,250u,250u,249u,249u,249u,249u,249u,249u,248u,248u,248u,248u,248u,248u,248u,247u,247u,247u,247u,247u,247u,247u,246u,246u,246u,246u,246u,246u,245u,245u,245u,245u,245u,245u,245u,244u,244u,244u,244u,244u,244u,244u,243u,243u,243u,243u,243u,243u,242u,242u,242u,242u,242u,242u,242u,241u,241u,241u,241u,241u,241u,241u,240u,240u,240u,240u,240u,240u,239u,239u,239u,239u,239u,239u,239u,238u,238u,238u,238u,238u,238u,238u,237u,237u,237u,237u,237u,237u,236u,236u,236u,236u,236u,236u,236u,235u,235u,235u,235u,235u,235u,235u,234u,234u,234u,234u,234u,234u,233u,233u,233u,233u,233u,233u,233u,232u,232u,232u,232u,232u,232u,232u,231u,231u,231u,231u,231u,231u,230u,230u,230u,230u,230u,230u,230u,229u,229u,229u,229u,229u,229u,229u,228u,228u,228u,228u,228u,228u,227u,227u,227u,227u,227u,227u,227u,226u,226u,226u,226u,226u,226u,226u,225u,225u,225u,225u,225u,225u,224u,224u,224u,224u,224u,224u,224u,223u,223u,223u,223u,223u,223u,223u,222u,222u,222u,222u,222u,222u,221u,221u,221u,221u,221u,221u,221u,220u,220u,220u,220u,220u,220u,220u,219u,219u,219u,219u,219u,219u,218u,218u,218u,218u,218u,218u,218u,217u,217u,217u,217u,217u,217u,217u,216u,216u,216u,216u,216u,216u,215u,215u,215u,215u,215u,215u,215u,214u,214u,214u,214u,214u,214u,214u,213u,213u,213u,213u,213u,213u,212u,212u,212u,212u,212u,212u,212u,211u,211u,211u,211u,211u,211u,211u,210u,210u,210u,210u,210u,210u,209u,209u,209u,209u,209u,209u,209u,208u,208u,208u,208u,208u,208u,208u,207u,207u,207u,207u,207u,207u,206u,206u,206u,206u,206u,206u,206u,205u,205u,205u,205u,205u,205u,205u,204u,204u,204u,204u,204u,204u,203u,203u,203u,203u,203u,203u,203u,202u,202u,202u,202u,202u,202u,202u,201u,201u,201u,201u,201u,201u,200u,200u,200u,200u,200u,200u,200u,199u,199u,199u,199u,199u,199u,199u,198u,198u,198u,198u,198u,198u,197u,197u,197u,197u,197u,197u,197u,196u,196u,196u,196u,196u,196u,196u,195u,195u,195u,195u,195u,195u,194u,194u,194u,194u,194u,194u,194u,193u,193u,193u,193u,193u,193u,193u,192u,192u,192u,192u,192u,192u,191u,191u,191u,191u,191u,191u,191u,190u,190u,190u,190u,190u,190u,190u,189u,189u,189u,189u,189u,189u,188u,188u,188u,188u,188u,188u,188u,187u,187u,187u,187u,187u,187u,187u,186u,186u,186u,186u,186u,186u,185u,185u,185u,185u,185u,185u,185u,184u,184u,184u,184u,184u,184u,184u,183u,183u,183u,183u,183u,183u,182u,182u,182u,182u,182u,182u,182u,181u,181u,181u,181u,181u,181u,181u,180u,180u,180u,180u,180u,180u,179u,179u,179u,179u,179u,179u,179u,178u,178u,178u,178u,178u,178u,178u,177u,177u,177u,177u,177u,177u,176u,176u,176u,176u,176u,176u,176u,175u,175u,175u,175u,175u,175u,175u,174u,174u,174u,174u,174u,174u,173u,173u,173u,173u,173u,173u,173u,172u,172u,172u,172u,172u,172u,172u,171u,171u,171u,171u,171u,171u,170u,170u,170u,170u,170u,170u,170u,169u,169u,169u,169u,169u,169u,169u,168u,168u,168u,168u,168u,168u,167u,167u,167u,167u,167u,167u,167u,166u,166u,166u,166u,166u,166u,166u,165u,165u,165u,165u,165u,165u,164u,164u,164u,164u,164u,164u,164u,163u,163u,163u,163u,163u,163u,163u,162u,162u,162u,162u,162u,162u,161u,161u,161u,161u,161u,161u,161u,160u,160u,160u,160u,160u,160u,160u,159u,159u,159u,159u,159u,159u,158u,158u,158u,158u,158u,158u,158u,157u,157u,157u,157u,157u,157u,157u,156u,156u,156u,156u,156u,156u,155u,155u,155u,155u,155u,155u,155u,154u,154u,154u,154u,154u,154u,154u,153u,153u,153u,153u,153u,153u,152u,152u,152u,152u,152u,152u,152u,151u,151u,151u,151u,151u,151u,151u,150u,150u,150u,150u,150u,150u,149u,149u,149u,149u,149u,149u,149u,148u,148u,148u,148u,148u,148u,148u,147u,147u,147u,147u,147u,147u,146u,146u,146u,146u,146u,146u,146u,145u,145u,145u,145u,145u,145u,145u,144u,144u,144u,144u,144u,144u,143u,143u,143u,143u,143u,143u,143u,142u,142u,142u,142u,142u,142u,142u,141u,141u,141u,141u,141u,141u,140u,140u,140u,140u,140u,140u,140u,139u,139u,139u,139u,139u,139u,139u,138u,138u,138u,138u,138u,138u,137u,137u,137u,137u,137u,137u,137u,136u,136u,136u,136u,136u,136u,136u,135u,135u,135u,135u,135u,135u,134u,134u,134u,134u,134u,134u,134u,133u,133u,133u,133u,133u,133u,133u,132u,132u,132u,132u,132u,132u,131u,131u,131u,131u,131u,131u,131u,130u,130u,130u,130u,130u,130u,130u,129u,129u,129u,129u,129u,129u,128u,128u,128u,128u,128u,128u,128u,127u,127u,127u,127u,127u,127u,127u,126u,126u,126u,126u,126u,126u,125u,125u,125u,125u,125u,125u,125u,124u,124u,124u,124u,124u,124u,124u,123u,123u,123u,123u,123u,123u,122u,122u,122u,122u,122u,122u,122u,121u,121u,121u,121u,121u,121u,121u,120u,120u,120u,120u,120u,120u,119u,119u,119u,119u,119u,119u,119u,118u,118u,118u,118u,118u,118u,118u,117u,117u,117u,117u,117u,117u,116u,116u,116u,116u,116u,116u,116u,115u,115u,115u,115u,115u,115u,115u,114u,114u,114u,114u,114u,114u,113u,113u,113u,113u,113u,113u,113u,112u,112u,112u,112u,112u,112u,112u,111u,111u,111u,111u,111u,111u,110u,110u,110u,110u,110u,110u,110u,109u,109u,109u,109u,109u,109u,109u,108u,108u,108u,108u,108u,108u,107u,107u,107u,107u,107u,107u,107u,106u,106u,106u,106u,106u,106u,106u,105u,105u,105u,105u,105u,105u,104u,104u,104u,104u,104u,104u,104u,103u,103u,103u,103u,103u,103u,103u,102u,102u,102u,102u,102u,102u,101u,101u,101u,101u,101u,101u,101u,100u,100u,100u,100u,100u,100u,100u,99u,99u,99u,99u,99u,99u,98u,98u,98u,98u,98u,98u,98u,97u,97u,97u,97u,97u,97u,97u,96u,96u,96u,96u,96u,96u,95u,95u,95u,95u,95u,95u,95u,94u,94u,94u,94u,94u,94u,94u,93u,93u,93u,93u,93u,93u,92u,92u,92u,92u,92u,92u,92u,91u,91u,91u,91u,91u,91u,91u,90u,90u,90u,90u,90u,90u,89u,89u,89u,89u,89u,89u,89u,88u,88u,88u,88u,88u,88u,88u,87u,87u,87u,87u,87u,87u,86u,86u,86u,86u,86u,86u,86u,85u,85u,85u,85u,85u,85u,85u,84u,84u,84u,84u,84u,84u,83u,83u,83u,83u,83u,83u,83u,82u,82u,82u,82u,82u,82u,82u,81u,81u,81u,81u,81u,81u,80u,80u,80u,80u,80u,80u,80u,79u,79u,79u,79u,79u,79u,79u,78u,78u,78u,78u,78u,78u,77u,77u,77u,77u,77u,77u,77u,76u,76u,76u,76u,76u,76u,76u,75u,75u,75u,75u,75u,75u,74u,74u,74u,74u,74u,74u,74u,73u,73u,73u,73u,73u,73u,73u,72u,72u,72u,72u,72u,72u,71u,71u,71u,71u,71u,71u,71u,70u,70u,70u,70u,70u,70u,70u,69u,69u,69u,69u,69u,69u,68u,68u,68u,68u,68u,68u,68u,67u,67u,67u,67u,67u,67u,67u,66u,66u,66u,66u,66u,66u,65u,65u,65u,65u,65u,65u,65u,64u,64u,64u,64u,64u,64u,64u,63u,63u,63u,63u,63u,63u,62u,62u,62u,62u,62u,62u,62u,61u,61u,61u,61u,61u,61u,61u,60u,60u,60u,60u,60u,60u,59u,59u,59u,59u,59u,59u,59u,58u,58u,58u,58u,58u,58u,58u,57u,57u,57u,57u,57u,57u,56u,56u,56u,56u,56u,56u,56u,55u,55u,55u,55u,55u,55u,55u,54u,54u,54u,54u,54u,54u,53u,53u,53u,53u,53u,53u,53u,52u,52u,52u,52u,52u,52u,52u,51u,51u,51u,51u,51u,51u,50u,50u,50u,50u,50u,50u,50u,49u,49u,49u,49u,49u,49u,49u,48u,48u,48u,48u,48u,48u,47u,47u,47u,47u,47u,47u,47u,46u,46u,46u,46u,46u,46u,46u,45u,45u,45u,45u,45u,45u,44u,44u,44u,44u,44u,44u,44u,43u,43u,43u,43u,43u,43u,43u,42u,42u,42u,42u,42u,42u,41u,41u,41u,41u,41u,41u,41u,40u,40u,40u,40u,40u,40u,40u,39u,39u,39u,39u,39u,39u,38u,38u,38u,38u,38u,38u,38u,37u,37u,37u,37u,37u,37u,37u,36u,36u,36u,36u,36u,36u,35u,35u,35u,35u,35u,35u,35u,34u,34u,34u,34u,34u,34u,34u,33u,33u,33u,33u,33u,33u,32u,32u,32u,32u,32u,32u,32u,31u,31u,31u,31u,31u,31u,31u,30u,30u,30u,30u,30u,30u,29u,29u,29u,29u,29u,29u,29u,28u,28u,28u,28u,28u,28u,28u,27u,27u,27u,27u,27u,27u,26u,26u,26u,26u,26u,26u,26u,25u,25u,25u,25u,25u,25u,25u,24u,24u,24u,24u,24u,24u,23u,23u,23u,23u,23u,23u,23u,22u,22u,22u,22u,22u,22u,22u,21u,21u,21u,21u,21u,21u,20u,20u,20u,20u,20u,20u,20u,19u,19u,19u,19u,19u,19u,19u,18u,18u,18u,18u,18u,18u,17u,17u,17u,17u,17u,17u,17u,16u,16u,16u,16u,16u,16u,16u,15u,15u,15u,15u,15u,15u,14u,14u,14u,14u,14u,14u,14u,13u,13u,13u,13u,13u,13u,13u,12u,12u,12u,12u,12u,12u,11u,11u,11u,11u,11u,11u,11u,10u,10u,10u,10u,10u,10u,10u,9u,9u,9u,9u,9u,9u,8u,8u,8u,8u,8u,8u,8u,7u,7u,7u,7u,7u,7u,7u,6u,6u,6u,6u,6u,6u,5u,5u,5u,5u,5u,5u,5u,4u,4u,4u,4u,4u,4u,4u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,4u,4u,4u,4u,4u,4u,4u,5u,5u,5u,5u,5u,5u,6u,6u,6u,6u,6u,6u,6u,7u,7u,7u,7u,7u,7u,7u,8u,8u,8u,8u,8u,8u,9u,9u,9u,9u,9u,9u,9u,10u,10u,10u,10u,10u,10u,10u,11u,11u,11u,11u,11u,11u,12u,12u,12u,12u,12u,12u,12u,13u,13u,13u,13u,13u,13u,13u,14u,14u,14u,14u,14u,14u,15u,15u,15u,15u,15u,15u,15u,16u,16u,16u,16u,16u,16u,16u,17u,17u,17u,17u,17u,17u,18u,18u,18u,18u,18u,18u,18u,19u,19u,19u,19u,19u,19u,19u,20u,20u,20u,20u,20u,20u,21u,21u,21u,21u,21u,21u,21u,22u,22u,22u,22u,22u,22u,22u,23u,23u,23u,23u,23u,23u,24u,24u,24u,24u,24u,24u,24u,25u,25u,25u,25u,25u,25u,25u,26u,26u,26u,26u,26u,26u,27u,27u,27u,27u,27u,27u,27u,28u,28u,28u,28u,28u,28u,28u,29u,29u,29u,29u,29u,29u,30u,30u,30u,30u,30u,30u,30u,31u,31u,31u,31u,31u,31u,31u,32u,32u,32u,32u,32u,32u,33u,33u,33u,33u,33u,33u,33u,34u,34u,34u,34u,34u,34u,34u,35u,35u,35u,35u,35u,35u,36u,36u,36u,36u,36u,36u,36u,37u,37u,37u,37u,37u,37u,37u,38u,38u,38u,38u,38u,38u,39u,39u,39u,39u,39u,39u,39u,40u,40u,40u,40u,40u,40u,40u,41u,41u,41u,41u,41u,41u,42u,42u,42u,42u,42u,42u,42u,43u,43u,43u,43u,43u,43u,43u,44u,44u,44u,44u,44u,44u,45u,45u,45u,45u,45u,45u,45u,46u,46u,46u,46u,46u,46u,46u,47u,47u,47u,47u,47u,47u,48u,48u,48u,48u,48u,48u,48u,49u,49u,49u,49u,49u,49u,49u,50u,50u,50u,50u,50u,50u,51u,51u,51u,51u,51u,51u,51u,52u,52u,52u,52u,52u,52u,52u,53u,53u,53u,53u,53u,53u,54u,54u,54u,54u,54u,54u,54u,55u,55u,55u,55u,55u,55u,55u,56u,56u,56u,56u,56u,56u,57u,57u,57u,57u,57u,57u,57u,58u,58u,58u,58u,58u,58u,58u,59u,59u,59u,59u,59u,59u,60u,60u,60u,60u,60u,60u,60u,61u,61u,61u,61u,61u,61u,61u,62u,62u,62u,62u,62u,62u,63u,63u,63u,63u,63u,63u,63u,64u,64u,64u,64u,64u,64u,64u,65u,65u,65u,65u,65u,65u,66u,66u,66u,66u,66u,66u,66u,67u,67u,67u,67u,67u,67u,67u,68u,68u,68u,68u,68u,68u,69u,69u,69u,69u,69u,69u,69u,70u,70u,70u,70u,70u,70u,70u,71u,71u,71u,71u,71u,71u,72u,72u,72u,72u,72u,72u,72u,73u,73u,73u,73u,73u,73u,73u,74u,74u,74u,74u,74u,74u,75u,75u,75u,75u,75u,75u,75u,76u,76u,76u,76u,76u,76u,76u,77u,77u,77u,77u,77u,77u,78u,78u,78u,78u,78u,78u,78u,79u,79u,79u,79u,79u,79u,79u,80u,80u,80u,80u,80u,80u,81u,81u,81u,81u,81u,81u,81u,82u,82u,82u,82u,82u,82u,82u,83u,83u,83u,83u,83u,83u,84u,84u,84u,84u,84u,84u,84u,85u,85u,85u,85u,85u,85u,85u,86u,86u,86u,86u,86u,86u,87u,87u,87u,87u,87u,87u,87u,88u,88u,88u,88u,88u,88u,88u,89u,89u,89u,89u,89u,89u,90u,90u,90u,90u,90u,90u,90u,91u,91u,91u,91u,91u,91u,91u,92u,92u,92u,92u,92u,92u,93u,93u,93u,93u,93u,93u,93u,94u,94u,94u,94u,94u,94u,94u,95u,95u,95u,95u,95u,95u,96u,96u,96u,96u,96u,96u,96u,97u,97u,97u,97u,97u,97u,97u,98u,98u,98u,98u,98u,98u,99u,99u,99u,99u,99u,99u,99u,100u,100u,100u,100u,100u,100u,100u,101u,101u,101u,101u,101u,101u,102u,102u,102u,102u,102u,102u,102u,103u,103u,103u,103u,103u,103u,103u,104u,104u,104u,104u,104u,104u,105u,105u,105u,105u,105u,105u,105u,106u,106u,106u,106u,106u,106u,106u,107u,107u,107u,107u,107u,107u,108u,108u,108u,108u,108u,108u,108u,109u,109u,109u,109u,109u,109u,109u,110u,110u,110u,110u,110u,110u,111u,111u,111u,111u,111u,111u,111u,112u,112u,112u,112u,112u,112u,112u,113u,113u,113u,113u,113u,113u,114u,114u,114u,114u,114u,114u,114u,115u,115u,115u,115u,115u,115u,115u,116u,116u,116u,116u,116u,116u,117u,117u,117u,117u,117u,117u,117u,118u,118u,118u,118u,118u,118u,118u,119u,119u,119u,119u,119u,119u,120u,120u,120u,120u,120u,120u,120u,121u,121u,121u,121u,121u,121u,121u,122u,122u,122u,122u,122u,122u,123u,123u,123u,123u,123u,123u,123u,124u,124u,124u,124u,124u,124u,124u,125u,125u,125u,125u,125u,125u,126u,126u,126u,126u,126u,126u,126u,127u,127u,127u,127u,127u,127u };
const uint8 WaveDAC8_wave_square[WaveDAC8_WAVE_SQUARE_LENGTH] = { 252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,252u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u,3u };


void main()
{	
	/************************************************/
	/* Riga Magica x mettere in riga stdio.h GNUcco */
	/************************************************/
	setvbuf(stdout,0,_IONBF,0);
	
	
	/**************************************************/
	/* GoBee Director main local vars Initialization  */
	/**************************************************/
	uint8 idx = 0;
	uint8 dummy __attribute__ ((unused));

	
	/*******************************************/
	/* GoBee Parameters Initialization 	   	   */
	/*******************************************/
	EEPROM_Enable();
	
	/* Read All parameters from EEPROM */
	ReadAllEEparams();
	
	/* restore feedback encoder.parameter.resolution values */
	pan_axis.mc.slave_enc.param.resolution  = PAN_ENCODER_RESOLUTION_X4;								/* [step]/2PI	*/
	tilt_axis.mc.slave_enc.param.resolution = TILT_ENCODER_RESOLUTION_X4;								/* [step]/2PI	*/
	
	/* restore axis.param.resolution values */
	pan_axis.param.resolution.fnum        = PAN_ENCODER_RESOLUTION_X4 * PAN_GEAR_RATIO;						/* [step]/2PI	*/
	tilt_axis.param.resolution.fnum       = TILT_ENCODER_RESOLUTION_X4 * TILT_GEAR_RATIO;					/* [step]/2PI	*/
	pan_axis.vparam.resolution_step_deg   = pan_axis.param.resolution.fnum / 360;							/* [step/deg]	*/
	tilt_axis.vparam.resolution_step_deg  = tilt_axis.param.resolution.fnum / 360;							/* [step/deg]	*/
	pan_axis.vparam.resolution_rad_step   = 2*M_PI / pan_axis.param.resolution.fnum ;						/* [rad/step]	*/
	tilt_axis.vparam.resolution_rad_step  = 2*M_PI / tilt_axis.param.resolution.fnum;						/* [rad/step]	*/		
					
	/*******************************************/
	/* GoBee Hardware Initialization 	       */
	/*******************************************/	
	Counter_LED_Start();			/* Initialize LED_OK blinking period Counter */
	Control_Reg_LED_Write(0xFF);
	
	AMuxSeq_Start();				/* Enable AMUx 							*/
	AMuxSeq_Next();
	
	ADC_Start();					/* Enable ADC 							*/
	ADC_StartConvert();				/* ADC Start Conversion  				*/
	ADC_IRQ_Enable();				/* Enable ADC Interrupts 				*/

	VDAC8_ANAPOS_Start();			/* Enable Anapos DAC					*/	
	
	QuadDec_PAN_Start();			/* Start PAN Feedback Encoder Counter	*/
	QuadDec_TILT_Start();			/* Start TILT Feedback Encoder Counter	*/
    
	PWM_MOTOR_PAN_Start();  		/* Start PAN Motor PWM					*/
  	PWM_MOTOR_TILT_Start();	    	/* Start TILT Motor PWM					*/  
	
	isr_BUTTON_Start();				/* Start Button isr 					*/
		

	/********************************************/
	/* GoBee Fault Structure Initialization 	*/
	/********************************************/
	gobeeFaults.general 				= GEN_NOFAULTS;
	gobeeFaults.FbkEncFaults 			= GEN_NOFAULTS;
	gobeeFaults.pan_FE_FAULT_prescaler  = 0;
	gobeeFaults.tilt_FE_FAULT_prescaler = 0;
	
	
	/************************************************************/
	/**** MOTOR CONTROL INITIALIZATION						 ****/
	/************************************************************/
	motor_init(&pan_axis);	/* Initialize Pan Axis  */
	motor_init(&tilt_axis);	/* Initialize Tilt Axis */

	
	/*********************************/
	/* Limits Control Initialization */
	/*********************************/
	Axis_limit_control_init();				/* Initialize Axis Limit Control vars & structs	*/
	isr_LIMIT_CTRL_Start();					/* Start LIMIT Control ISR						*/	
	
	
	/********************************/
	/* Statistics Initialization	*/
	/********************************/
	statistics_init(&pan_absolute_sensor_stat);
	statistics_init(&tilt_absolute_sensor_stat);
	current_statistics_init(&pan_current_stat);
	current_statistics_init(&tilt_current_stat);	
	
	/********************************************************************/
	/* Read All Q Parameters (QELEMENT structure array) from EEPROM		*/
	/********************************************************************/
	ReadAllQEEparams();

	/************************************************************************/
	/* Q elements															*/
	/* "fast indexing" table q_number --> memory_number initialization		*/
	/************************************************************************/
	InitQFastIdxTable();
	InitQmemoryStandardAllocationTable();		//initialize standard address table
	
	/************************************************************************/
	/* Q elements															*/
	/* Initialize All Q positions											*/
	/* 		mode=QMODE_DEFAULT	-->	position = default						*/
	/* 		mode=QMODE_ADJUST	-->	position = default+adjust				*/	
	/************************************************************************/
	InitQAllPositions();	

	/************************************************************/
	/**** MOVER INITIALIZATION								 ****/
	/************************************************************/
	MoverInit(&mover_pan);										/* Initialize the PAN Mover				*/
	MoverInit(&mover_tilt);										/* Initialize the TILT Mover			*/	

	
	/********************************************************/
	/* Director Mapping State Machine Initialization & STOP */
	/********************************************************/
	MappingStateMachineInit();

	
	/****************************************/
	/* Constant CLUs Initialization			*/
	/****************************************/
	InitAllClus();		//Init CLU definitions
	clu_sm_init();		//Init CLU state machine
	
	
	/************************************************************/
	/**** BOARD SYSTEM HW INIT								 ****/
	/************************************************************/
	
	UART_USB_Start();			/* initialize and start the USB UART */
	CyDelay(500);

	
//	/************************************************************/
//	/**** LoRa ENABLE										 ****/
//	/************************************************************/	
//	UART_LORA_Start();			/* initialize and start the WIFI UART (RX) 			*/
//	isr_UART_LORA_RX_Start();	/* initize backward gateway UART LORA --> UART USB	*/
//	
//	Control_Reg_LORA_Write(0xFF);		/* SET_A = H */
//	Control_Reg_LORA_RESET_Write(0xFF);	/* RESET = H */
	
	
	/*******************************************/
	/* GoBee Standard Output Presentation       */
	/*******************************************/	

	/* Console Presentation */
	printf("\r\n");
	printf(STR_FW_VERS);
	printf(STR_COPY);
	printf(STR_AUTHOR1);
	printf(STR_AUTHOR2);
	printf(STR_AUTHOR3);
	printf(STR_AUTHOR4);	
	printf("\r\n");
	

	/******************************/
	/* Interrupts initializations */
	/******************************/

	/************************************/
	/* CONTROL INTERRUPT INITIALIZATION */
	/************************************/		
	isr_CTRL_Start();				/* Start Control ISR			 		*/

	isr_EVENTS_IDENTIF_Start();		/* Start Events Identificator Interrupt	*/
	
	isr_CLU_EXEC_Start();			/* Start CLUs Execution Interrupt		*/

	
	/***************************************************/
	/* INVENSENSE ITG-3701 DIGITAL GYRO INITIALIZATION */
	/***************************************************/
#if ITG_3701_ENABLED	
	I2C_ITG3701_Start();		// I2C start
	
	// Verify HW connection
	dummy = ITG3701_ReadByte(ITG3701_ADDRESS, ITG3701_WHO_AM_I);  // Read WHO_AM_I register for ITG3701 gyro
	if (dummy != 0x68)
  		printf("*ITG3701 gyro FAULT!\r\n");		
	else	
  		printf("*ITG3701 gyro OK!\r\n");	
		
	initITG3701();				// Initialize ITG-3701 gyro
	CyDelay(100);
	getGres();					// get sensor resolutions, only need to do this once (calculates gRes)
	//gyrocalITG3701(gyroBias);	// Calibrate gyro loading biases in bias registers
#endif	


	/********************************/
	/*** ENABLE GLOBAL INTERRUPTS ***/
	/********************************/
	CYGlobalIntEnable;				/* Enable Global Interrupts */

	/************************************/
	/*** ENABLE IMU UM7-LT INTERRUPTS ***/
	/************************************/
#if IMU_UM7_ENABLED
	printf("\r\nIMU_UM7_PRE-INIT\r\n");
	
	IMU_UM7_UART_ClearRxBuffer();	/* Clear IMU-UM7 Psoc HW Component RX Buffer	*/
    
	IMU_UM7_InitAndStart();			/* Enable CH ROBOTICS UM7-LT IMU (rgatti code) */
	
	//IMU_UM7_SetRate(RATE_EULER, 25);		//Euler datas = 25Hz
	//IMU_UM7_SetRate(RATE_QUAT, 0);			//NO quaternions
	//IMU_UM7_SetRate(RATE_PROC_ACCEL, 0);	//NO Acceleration datas
	//IMU_UM7_SetRate(RATE_PROC_GYRO, 0);		//NO Gyro datas
	//IMU_UM7_SetRate(RATE_PROC_MAG, 0);		//NO Mag datas
	//IMU_SetGyroTrim(10.23, 20.34, 30.45);
	
	CyDelay(100);
	//(BOOL zerogyro, BOOL quaternion_mode, BOOL use_magnetometer)
	IMU_UM7_SetMisc(true, false, true);
	
	//IMU_UM7_PrintSettings();	
	printf("\r\nIMU_UM7_POST-INIT\r\n");	
#endif

	/******************************/
	/* POWER ON INITIAL DELAY     */
	/******************************/
	printf("\r\n");
	CyDelay(200);
	
	printf("GoBee Director STARTUP: wait a moment");
	
	for(idx = 1; idx > 0; idx--)
	{
		CyDelay(1000);		/* 1 sec Delay x 15 = 1 sec Total Delay*/
		printf(".");
	}
	printf("\r\n");
	
	
//	/*************************************/
//	/* Change Machine State to ENERGIZED */
//	/*************************************/
//	QuadDec_PAN_Start();						/* Reset PAN Feedback Encoder Counter	*/
// 	QuadDec_TILT_Start();						/* Reset TILT Feedback Encoder Counter	*/   
//	CyDelay(100);
	

	/************************************************************************************/
	/* Starting Gobee Machine:				 											*/
	/*   REMOTE CONTROL MODE	--> starts deenergized)			 						*/
	/*   DIRECTOR MODE			--> starts energized + mapping state machine activated	*/	
	/************************************************************************************/	
	if	(gobee_param.mode == REMOTECONTROL_MODE)
	{
		machine_state = GOBEE_DEENERGIZED;
	}	
	else	//DIRECTOR_MODE
	{
		machine_state = GOBEE_ENERGIZED;			
		motor_energize(&pan_axis);
		motor_energize(&tilt_axis);
		
		/* Mapping State Machine START */
		MappingStateMachineStart();	
	}
	
	
	/*************/
	/* main loop */
	/*************/
	for(;;)
    {
		/* parse the standard input buffer input */
		dummy = parser();


		/* Display on the standard output the Console Name*/
		printf("\r\n");	
		printf("\rGoBee");		
		
		//prompts the machine mode status
		if (gobee_param.mode == DIRECTOR_MODE)
		{
			printf("Director");			
		}
		else
		{
			printf("RC");			
		}		
		
		/* If any Fault asserted prompts the Fault status on the standard output */
		if (gobeeFaults.general)
		{
			printf("[F]");			
		}
		
		//prompts the energize/deenergize status
		if (machine_state == GOBEE_ENERGIZED)
		{
			printf("[EN]");			
		}		
		else
		{
			printf("[DEEN]");			
		}		
		
//		//prompts the feedback type
//		if (gobee_param.feedback == FBK_ANALOG_GYRO_RATE)
//		{
//			printf("[FBK=AGYRO_VEL]");
//		}		
//		else
//		if (gobee_param.feedback == FBK_ANALOG_GYRO_ANGLE)
//		{
//			printf("[FBK=AGYRO_POS]");
//		}
//		else		
//		if (gobee_param.feedback == FBK_ENCODER_POSITION)
//		{
//			printf("[FBK=ENC_POS]");
//		}
//		else
//		if (gobee_param.feedback == FBK_ENCODER_VELOCITY)
//		{
//			printf("[FBK=ENC_VEL]");
//		}		
//		else
//		{
//			printf("[FBK=OPEN]");
//		}
				
		/* Display on the standard output the console system prompt */

		printf(">");	
		CyDelay(200);
	
    }
}

/* [] END OF FILE */
